<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sewa Peralatan Profesional | GearGlide</title>
    <meta name="description" content="Sewa peralatan profesional berkualitas tinggi untuk berbagai kebutuhan dengan harga kompetitif. Mulai dari fotografi, audio, lighting hingga peralatan outdoor.">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#2563EB',
                        secondary: '#F59E0B',
                        accent: '#10B981'
                    }
                }
            }
        }
    </script>
    
    <!-- Feather Icons -->
    <script src="https://unpkg.com/feather-icons"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .product-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .product-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        .filter-chip {
            transition: background-color 0.2s ease;
        }
        .filter-chip:hover {
            background-color: #DBEAFE;
        }
        .lazy-load {
            background: linear-gradient(90deg, #F3F4F6 25%, #E5E7EB 50%, #F3F4F6 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
        }
        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        [x-cloak] { 
            display: none !important; 
        }
        .drawer-enter {
            transform: translateY(100%);
        }
        .drawer-enter-active {
            transform: translateY(0);
            transition: transform 0.3s ease-out;
        }
        .mobile-sticky-bottom {
            padding-bottom: 80px;
        }
    </style>
</head>
<body class="font-sans bg-gray-50 text-gray-800">
    
    <div x-data="productCatalog()" x-init="init()">
        <!-- Header Section -->
        <header class="bg-gradient-to-r from-primary to-blue-700 text-white py-6 sm:py-8 lg:py-12">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex items-center text-xs sm:text-sm text-blue-100 mb-2">
                    <a href="#" class="hover:text-white transition-colors">Home</a>
                    <span class="mx-2">/</span>
                    <a href="#" class="hover:text-white transition-colors">Peralatan</a>
                    <span class="mx-2">/</span>
                    <span class="text-white">Semua Kategori</span>
                </div>
                <h1 class="text-2xl sm:text-3xl lg:text-4xl font-bold mb-2 sm:mb-4">Sewa Peralatan Profesional</h1>
                <p class="text-sm sm:text-base text-blue-100 max-w-2xl">
                    Temukan peralatan berkualitas tinggi untuk kebutuhan proyek Anda. Dengan harga kompetitif dan layanan profesional, kami siap mendukung kesuksesan Anda.
                </p>
            </div>
        </header>

        <!-- Main Content -->
        <main class="container mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8">
            <div class="flex flex-col lg:flex-row gap-6">
                <!-- Filter Sidebar - Desktop -->
                <aside class="hidden lg:block w-64 xl:w-72 flex-shrink-0">
                    <div class="bg-white rounded-lg shadow-md p-6 sticky top-4">
                        <h2 class="font-bold text-lg mb-4 flex items-center justify-between">
                            Filter
                            <button @click="resetFilters()" class="text-xs text-primary hover:text-blue-700">
                                Reset
                            </button>
                        </h2>
                        
                        <!-- Search -->
                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Cari Peralatan</label>
                            <div class="relative">
                                <input type="text" 
                                       x-model="searchQuery" 
                                       placeholder="Cari produk atau merek" 
                                       class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary text-sm">
                                <i data-feather="search" class="absolute left-3 top-2.5 text-gray-400 w-4 h-4"></i>
                            </div>
                        </div>
                        
                        <!-- Categories -->
                        <div class="mb-6">
                            <h3 class="font-medium text-gray-700 mb-3 text-sm">Kategori</h3>
                            <div class="space-y-2">
                                <label class="flex items-center cursor-pointer hover:bg-gray-50 p-2 rounded -ml-2">
                                    <input type="checkbox" 
                                           value="fotografi" 
                                           x-model="selectedCategories" 
                                           class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded">
                                    <span class="ml-2 text-sm text-gray-700">Fotografi & Videografi</span>
                                </label>
                                <label class="flex items-center cursor-pointer hover:bg-gray-50 p-2 rounded -ml-2">
                                    <input type="checkbox" 
                                           value="audio" 
                                           x-model="selectedCategories" 
                                           class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded">
                                    <span class="ml-2 text-sm text-gray-700">Audio & Sound System</span>
                                </label>
                                <label class="flex items-center cursor-pointer hover:bg-gray-50 p-2 rounded -ml-2">
                                    <input type="checkbox" 
                                           value="lighting" 
                                           x-model="selectedCategories" 
                                           class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded">
                                    <span class="ml-2 text-sm text-gray-700">Lighting & Stage</span>
                                </label>
                            </div>
                        </div>
                        
                        <!-- Price Range -->
                        <div class="mb-6">
                            <h3 class="font-medium text-gray-700 mb-3 text-sm">Rentang Harga</h3>
                            <div class="space-y-3">
                                <div>
                                    <label class="text-xs text-gray-600">Min: Rp<span x-text="priceRange[0].toLocaleString('id-ID')"></span></label>
                                    <input type="range" 
                                           x-model.number="priceRange[0]" 
                                           min="50000" 
                                           max="5000000" 
                                           step="50000" 
                                           class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                                </div>
                                <div>
                                    <label class="text-xs text-gray-600">Max: Rp<span x-text="priceRange[1].toLocaleString('id-ID')"></span></label>
                                    <input type="range" 
                                           x-model.number="priceRange[1]" 
                                           min="50000" 
                                           max="5000000" 
                                           step="50000" 
                                           class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                                </div>
                            </div>
                        </div>
                        
                        <!-- Rental Duration -->
                        <div class="mb-6">
                            <h3 class="font-medium text-gray-700 mb-3 text-sm">Durasi Rental</h3>
                            <div class="space-y-2">
                                <label class="flex items-center cursor-pointer hover:bg-gray-50 p-2 rounded -ml-2">
                                    <input type="radio" 
                                           value="daily" 
                                           x-model="rentalDuration" 
                                           class="h-4 w-4 text-primary focus:ring-primary border-gray-300">
                                    <span class="ml-2 text-sm text-gray-700">Harian</span>
                                </label>
                                <label class="flex items-center cursor-pointer hover:bg-gray-50 p-2 rounded -ml-2">
                                    <input type="radio" 
                                           value="weekly" 
                                           x-model="rentalDuration" 
                                           class="h-4 w-4 text-primary focus:ring-primary border-gray-300">
                                    <span class="ml-2 text-sm text-gray-700">Mingguan <span class="text-green-600">(Diskon 10%)</span></span>
                                </label>
                                <label class="flex items-center cursor-pointer hover:bg-gray-50 p-2 rounded -ml-2">
                                    <input type="radio" 
                                           value="monthly" 
                                           x-model="rentalDuration" 
                                           class="h-4 w-4 text-primary focus:ring-primary border-gray-300">
                                    <span class="ml-2 text-sm text-gray-700">Bulanan <span class="text-green-600">(Diskon 25%)</span></span>
                                </label>
                            </div>
                        </div>
                        
                        <!-- Condition -->
                        <div class="mb-6">
                            <h3 class="font-medium text-gray-700 mb-3 text-sm">Kondisi</h3>
                            <div class="space-y-2">
                                <label class="flex items-center cursor-pointer hover:bg-gray-50 p-2 rounded -ml-2">
                                    <input type="checkbox" 
                                           value="new" 
                                           x-model="condition" 
                                           class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded">
                                    <span class="ml-2 text-sm text-gray-700">Baru (< 6 bulan)</span>
                                </label>
                                <label class="flex items-center cursor-pointer hover:bg-gray-50 p-2 rounded -ml-2">
                                    <input type="checkbox" 
                                           value="like-new" 
                                           x-model="condition" 
                                           class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded">
                                    <span class="ml-2 text-sm text-gray-700">Seperti Baru</span>
                                </label>
                                <label class="flex items-center cursor-pointer hover:bg-gray-50 p-2 rounded -ml-2">
                                    <input type="checkbox" 
                                           value="good" 
                                           x-model="condition" 
                                           class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded">
                                    <span class="ml-2 text-sm text-gray-700">Baik</span>
                                </label>
                            </div>
                        </div>
                        
                        <!-- Availability -->
                        <div class="mb-4">
                            <div class="flex items-center justify-between p-2 hover:bg-gray-50 rounded -mx-2">
                                <h3 class="font-medium text-gray-700 text-sm">Tersedia Sekarang</h3>
                                <button @click="availability = !availability" 
                                        :class="{'bg-primary': availability, 'bg-gray-300': !availability}" 
                                        class="relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2">
                                    <span :class="{'translate-x-6': availability, 'translate-x-1': !availability}" 
                                          class="inline-block h-4 w-4 transform rounded-full bg-white transition-transform shadow-sm"></span>
                                </button>
                            </div>
                        </div>
                    </div>
                </aside>
                
                <!-- Main Content Area -->
                <div class="flex-1 min-w-0 mb-20 lg:mb-0">
                    <!-- Sorting & View Options -->
                    <div class="bg-white rounded-lg shadow-sm p-3 sm:p-4 mb-4 sm:mb-6">
                        <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3">
                            <div class="w-full sm:w-auto">
                                <span class="text-sm text-gray-600" x-text="`Menampilkan ${filteredProducts().length} produk`"></span>
                                <div class="flex flex-wrap gap-1.5 mt-2" x-show="activeFilters().length > 0">
                                    <template x-for="filter in activeFilters()" :key="filter">
                                        <span class="inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 filter-chip">
                                            <span x-text="filter"></span>
                                        </span>
                                    </template>
                                </div>
                            </div>
                            
                            <div class="flex items-center gap-2 sm:gap-4 w-full sm:w-auto">
                                <div class="flex items-center flex-1 sm:flex-initial">
                                    <label for="sort" class="text-xs sm:text-sm text-gray-600 mr-2 whitespace-nowrap">Urutkan:</label>
                                    <select id="sort" 
                                            x-model="sortBy" 
                                            class="text-xs sm:text-sm border-gray-300 rounded-md focus:ring-primary focus:border-primary flex-1 sm:flex-initial">
                                        <option value="popular">Populer</option>
                                        <option value="price-low">Harga ↑</option>
                                        <option value="price-high">Harga ↓</option>
                                        <option value="rating">Rating</option>
                                        <option value="newest">Terbaru</option>
                                    </select>
                                </div>
                                
                                <div class="hidden sm:flex items-center gap-1 border-l pl-4 border-gray-200">
                                    <button @click="viewType = 'grid'" 
                                            :class="{'text-primary bg-blue-50': viewType === 'grid', 'text-gray-400': viewType !== 'grid'}" 
                                            class="p-1.5 rounded hover:bg-gray-100 transition-colors">
                                        <i data-feather="grid" class="w-5 h-5"></i>
                                    </button>
                                    <button @click="viewType = 'list'" 
                                            :class="{'text-primary bg-blue-50': viewType === 'list', 'text-gray-400': viewType !== 'list'}" 
                                            class="p-1.5 rounded hover:bg-gray-100 transition-colors">
                                        <i data-feather="list" class="w-5 h-5"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Product Grid -->
                    <div x-show="viewType === 'grid'" class="grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-4 sm:gap-6">
                        <template x-for="product in paginatedProducts()" :key="product.id">
                            <div class="bg-white rounded-lg shadow-md overflow-hidden product-card">
                                <!-- Product Image -->
                                <div class="relative h-48 sm:h-56 overflow-hidden bg-gray-100">
                                    <img :src="product.image" 
                                         :alt="product.name" 
                                         class="w-full h-full object-cover"
                                         loading="lazy">
                                    
                                    <!-- Badges -->
                                    <div class="absolute top-2 left-2 flex flex-wrap gap-1">
                                        <span x-show="product.tags.includes('new')" 
                                              class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800">
                                            Baru
                                        </span>
                                        <span x-show="product.tags.includes('popular')" 
                                              class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800">
                                            Populer
                                        </span>
                                        <span x-show="product.tags.includes('limited')" 
                                              class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-orange-100 text-orange-800">
                                            Tersisa <span x-text="product.stock"></span>
                                        </span>
                                    </div>
                                    
                                    <!-- Wishlist Button -->
                                    <button @click.prevent="toggleWishlist(product.id)" 
                                            class="absolute top-2 right-2 p-2 rounded-full bg-white/90 shadow-sm hover:bg-white transition-colors">
                                        <i data-feather="heart" 
                                           :class="{'fill-current text-red-500': wishlist.includes(product.id), 'text-gray-600': !wishlist.includes(product.id)}" 
                                           class="w-4 h-4"></i>
                                    </button>
                                </div>
                                
                                <!-- Product Details -->
                                <div class="p-4">
                                    <!-- Rating -->
                                    <div class="flex items-center mb-2">
                                        <div class="flex">
                                            <template x-for="i in 5" :key="i">
                                                <i data-feather="star" 
                                                   :class="{'fill-current text-yellow-400': i <= Math.round(product.rating), 'text-gray-300': i > Math.round(product.rating)}" 
                                                   class="w-4 h-4"></i>
                                            </template>
                                        </div>
                                        <span class="text-xs text-gray-500 ml-1.5" 
                                              x-text="`${product.rating} (${product.reviews})`"></span>
                                    </div>
                                    
                                    <!-- Name & Brand -->
                                    <h3 class="font-semibold text-gray-900 mb-1 line-clamp-2 min-h-[2.5rem]" 
                                        x-text="product.name"></h3>
                                    <p class="text-xs sm:text-sm text-gray-500 mb-3" 
                                       x-text="`${product.brand} | ${getConditionLabel(product.condition)}`"></p>
                                    
                                    <!-- Price -->
                                    <div class="mb-4">
                                        <p class="text-lg sm:text-xl font-bold text-gray-900" 
                                           x-text="formatPrice(product)"></p>
                                        <p x-show="rentalDuration !== 'daily'" 
                                           class="text-xs text-gray-500 line-through" 
                                           x-text="`Rp${product.price.toLocaleString('id-ID')}/hari`"></p>
                                    </div>
                                    
                                    <!-- Quick Specs -->
                                    <div class="flex flex-wrap gap-2 text-xs text-gray-600 mb-4 pb-4 border-b border-gray-100">
                                        <span class="inline-flex items-center gap-1">
                                            <i data-feather="calendar" class="w-3 h-3"></i>
                                            <span x-text="product.specs.year"></span>
                                        </span>
                                        <template x-if="product.specs.resolution">
                                            <span class="inline-flex items-center gap-1">
                                                <i data-feather="camera" class="w-3 h-3"></i>
                                                <span x-text="product.specs.resolution"></span>
                                            </span>
                                        </template>
                                    </div>
                                    
                                    <!-- Availability -->
                                    <div class="space-y-1 mb-4">
                                        <div class="flex items-center text-xs sm:text-sm text-green-600">
                                            <i data-feather="check-circle" class="w-4 h-4 mr-1.5 flex-shrink-0"></i>
                                            <span>Tersedia besok</span>
                                        </div>
                                        <div x-show="product.delivery" 
                                             class="flex items-center text-xs sm:text-sm text-green-600">
                                            <i data-feather="truck" class="w-4 h-4 mr-1.5 flex-shrink-0"></i>
                                            <span>Antar-jemput gratis</span>
                                        </div>
                                    </div>
                                    
                                    <!-- Buttons -->
                                    <div class="flex gap-2">
                                        <button class="flex-1 bg-white border border-gray-300 text-gray-700 py-2 px-3 rounded-md hover:bg-gray-50 transition-colors text-sm font-medium">
                                            Detail
                                        </button>
                                        <button class="flex-1 bg-primary text-white py-2 px-3 rounded-md hover:bg-blue-700 transition-colors text-sm font-medium">
                                            Pesan
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </template>
                    </div>
                    
                    <!-- Product List View -->
                    <div x-show="viewType === 'list'" class="space-y-4">
                        <template x-for="product in paginatedProducts()" :key="product.id">
                            <div class="bg-white rounded-lg shadow-md overflow-hidden product-card flex flex-col sm:flex-row">
                                <!-- Product Image -->
                                <div class="sm:w-56 h-48 sm:h-auto relative flex-shrink-0 bg-gray-100">
                                    <img :src="product.image" 
                                         :alt="product.name" 
                                         class="w-full h-full object-cover"
                                         loading="lazy">
                                    
                                    <!-- Wishlist Button -->
                                    <button @click.prevent="toggleWishlist(product.id)" 
                                            class="absolute top-2 right-2 p-2 rounded-full bg-white/90 shadow-sm hover:bg-white transition-colors">
                                        <i data-feather="heart" 
                                           :class="{'fill-current text-red-500': wishlist.includes(product.id), 'text-gray-600': !wishlist.includes(product.id)}" 
                                           class="w-4 h-4"></i>
                                    </button>
                                </div>
                                
                                <!-- Product Details -->
                                <div class="flex-1 p-4 sm:p-5">
                                    <div class="flex flex-col h-full">
                                        <div class="flex-1">
                                            <!-- Badges & Rating -->
                                            <div class="flex items-start justify-between mb-2">
                                                <div class="flex flex-wrap gap-1">
                                                    <span x-show="product.tags.includes('new')" 
                                                          class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800">
                                                        Baru
                                                    </span>
                                                    <span x-show="product.tags.includes('popular')" 
                                                          class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800">
                                                        Populer
                                                    </span>
                                                </div>
                                                
                                                <div class="flex items-center">
                                                    <div class="flex">
                                                        <template x-for="i in 5" :key="i">
                                                            <i data-feather="star" 
                                                               :class="{'fill-current text-yellow-400': i <= Math.round(product.rating), 'text-gray-300': i > Math.round(product.rating)}" 
                                                               class="w-4 h-4"></i>
                                                        </template>
                                                    </div>
                                                    <span class="text-xs text-gray-500 ml-1.5" 
                                                          x-text="`${product.rating} (${product.reviews})`"></span>
                                                </div>
                                            </div>
                                            
                                            <!-- Name & Brand -->
                                            <h3 class="font-semibold text-gray-900 mb-1 text-lg" 
                                                x-text="product.name"></h3>
                                            <p class="text-sm text-gray-500 mb-3" 
                                               x-text="`${product.brand} | ${getConditionLabel(product.condition)}`"></p>
                                            
                                            <!-- Detailed Specs -->
                                            <div class="grid grid-cols-2 sm:grid-cols-4 gap-3 text-sm text-gray-600 mb-4">
                                                <div x-show="product.specs.type">
                                                    <span class="font-medium block text-xs text-gray-500">Tipe</span>
                                                    <span x-text="product.specs.type"></span>
                                                </div>
                                                <div x-show="product.specs.resolution">
                                                    <span class="font-medium block text-xs text-gray-500">Resolusi</span>
                                                    <span x-text="product.specs.resolution"></span>
                                                </div>
                                                <div x-show="product.specs.power">
                                                    <span class="font-medium block text-xs text-gray-500">Power</span>
                                                    <span x-text="product.specs.power"></span>
                                                </div>
                                                <div>
                                                    <span class="font-medium block text-xs text-gray-500">Tahun</span>
                                                    <span x-text="product.specs.year"></span>
                                                </div>
                                            </div>
                                            
                                            <!-- Availability -->
                                            <div class="flex flex-wrap gap-4 text-sm mb-4">
                                                <div class="flex items-center text-green-600">
                                                    <i data-feather="check-circle" class="w-4 h-4 mr-1.5"></i>
                                                    <span>Tersedia besok</span>
                                                </div>
                                                <div x-show="product.delivery" 
                                                     class="flex items-center text-green-600">
                                                    <i data-feather="truck" class="w-4 h-4 mr-1.5"></i>
                                                    <span>Antar-jemput gratis</span>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- Price & CTA -->
                                        <div class="flex flex-col sm:flex-row sm:items-end sm:justify-between gap-3 pt-3 border-t border-gray-100">
                                            <div>
                                                <p class="text-xl sm:text-2xl font-bold text-gray-900" 
                                                   x-text="formatPrice(product)"></p>
                                                <p x-show="rentalDuration !== 'daily'" 
                                                   class="text-sm text-gray-500 line-through" 
                                                   x-text="`Rp${product.price.toLocaleString('id-ID')}/hari`"></p>
                                            </div>
                                            
                                            <div class="flex gap-2">
                                                <button class="bg-white border border-gray-300 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-50 transition-colors text-sm font-medium">
                                                    Lihat Detail
                                                </button>
                                                <button class="bg-primary text-white py-2 px-6 rounded-md hover:bg-blue-700 transition-colors text-sm font-medium">
                                                    Pesan Sekarang
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </template>
                    </div>
                    
                    <!-- Empty State -->
                    <div x-show="filteredProducts().length === 0" 
                         class="bg-white rounded-lg shadow-sm p-8 sm:p-12 text-center">
                        <div class="max-w-md mx-auto">
                            <div class="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                <i data-feather="search" class="w-8 h-8 text-gray-400"></i>
                            </div>
                            <h3 class="text-lg font-semibold text-gray-900 mb-2">Tidak ada produk yang sesuai</h3>
                            <p class="text-gray-500 mb-6">Coba ubah filter pencarian Anda atau gunakan kata kunci yang berbeda</p>
                            <button @click="resetFilters()" 
                                    class="bg-primary text-white py-2.5 px-6 rounded-md hover:bg-blue-700 transition-colors font-medium">
                                Reset Semua Filter
                            </button>
                        </div>
                    </div>
                    
                    <!-- Trust Cards -->
                    <div x-show="filteredProducts().length > 0" 
                         class="grid grid-cols-1 sm:grid-cols-3 gap-4 my-8">
                        <div class="bg-white rounded-lg shadow-sm p-6 text-center hover:shadow-md transition-shadow">
                            <div class="w-12 h-12 bg-blue-50 rounded-full flex items-center justify-center mx-auto mb-3">
                                <i data-feather="check-circle" class="w-6 h-6 text-primary"></i>
                            </div>
                            <h3 class="font-semibold text-gray-900 mb-2">Jaminan Kualitas</h3>
                            <p class="text-sm text-gray-600 mb-3">Semua peralatan diuji & disterilisasi</p>
                            <a href="#" class="text-sm text-primary hover:text-blue-700 font-medium">Lihat Standar →</a>
                        </div>
                        <div class="bg-white rounded-lg shadow-sm p-6 text-center hover:shadow-md transition-shadow">
                            <div class="w-12 h-12 bg-blue-50 rounded-full flex items-center justify-center mx-auto mb-3">
                                <i data-feather="truck" class="w-6 h-6 text-primary"></i>
                            </div>
                            <h3 class="font-semibold text-gray-900 mb-2">Gratis Antar-Jemput</h3>
                            <p class="text-sm text-gray-600 mb-3">Jakarta dalam radius 10km</p>
                            <a href="#" class="text-sm text-primary hover:text-blue-700 font-medium">Cek Area →</a>
                        </div>
                        <div class="bg-white rounded-lg shadow-sm p-6 text-center hover:shadow-md transition-shadow">
                            <div class="w-12 h-12 bg-blue-50 rounded-full flex items-center justify-center mx-auto mb-3">
                                <i data-feather="headphones" class="w-6 h-6 text-primary"></i>
                            </div>
                            <h3 class="font-semibold text-gray-900 mb-2">Bantuan Profesional</h3>
                            <p class="text-sm text-gray-600 mb-3">Setup & troubleshooting gratis</p>
                            <a href="#" class="text-sm text-primary hover:text-blue-700 font-medium">Hubungi Kami →</a>
                        </div>
                    </div>
                    
                    <!-- Pagination -->
                    <div x-show="filteredProducts().length > itemsPerPage" 
                         class="flex flex-col sm:flex-row items-center justify-between bg-white rounded-lg shadow-sm p-4 mt-6 gap-4">
                        <div class="text-sm text-gray-600 order-2 sm:order-1">
                            <span x-text="`${((currentPage - 1) * itemsPerPage) + 1}-${Math.min(currentPage * itemsPerPage, filteredProducts().length)} dari ${filteredProducts().length}`"></span>
                        </div>
                        
                        <div class="flex items-center gap-3 order-1 sm:order-2">
                            <select x-model.number="itemsPerPage" 
                                    class="text-sm border-gray-300 rounded-md focus:ring-primary focus:border-primary">
                                <option value="12">12 per halaman</option>
                                <option value="24">24 per halaman</option>
                                <option value="48">48 per halaman</option>
                            </select>
                            
                            <nav class="flex gap-1">
                                <button x-show="currentPage > 1" 
                                        @click="currentPage--" 
                                        class="p-2 rounded-md border border-gray-300 bg-white text-gray-600 hover:bg-gray-50 transition-colors">
                                    <i data-feather="chevron-left" class="w-4 h-4"></i>
                                </button>
                                
                                <template x-for="page in totalPages()" :key="page">
                                    <button @click="currentPage = page" 
                                            :class="{'bg-primary text-white': currentPage === page, 'bg-white text-gray-600 hover:bg-gray-50': currentPage !== page}" 
                                            class="px-3 py-2 rounded-md border border-gray-300 text-sm font-medium transition-colors min-w-[40px]">
                                        <span x-text="page"></span>
                                    </button>
                                </template>
                                
                                <button x-show="currentPage < totalPages()" 
                                        @click="currentPage++" 
                                        class="p-2 rounded-md border border-gray-300 bg-white text-gray-600 hover:bg-gray-50 transition-colors">
                                    <i data-feather="chevron-right" class="w-4 h-4"></i>
                                </button>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        
        <!-- Mobile Filter Button -->
        <div class="lg:hidden fixed bottom-20 right-4 z-40">
            <button @click="mobileFilterOpen = true" 
                    class="bg-primary text-white p-4 rounded-full shadow-lg hover:bg-blue-700 transition-all hover:scale-105">
                <i data-feather="filter" class="w-6 h-6"></i>
            </button>
        </div>
        
        <!-- Mobile Filter Drawer -->
        <div x-show="mobileFilterOpen" 
             x-cloak
             class="fixed inset-0 z-50 overflow-y-auto lg:hidden"
             @keydown.escape.window="mobileFilterOpen = false">
            <!-- Background overlay -->
            <div x-show="mobileFilterOpen"
                 x-transition:enter="transition-opacity ease-out duration-300"
                 x-transition:enter-start="opacity-0"
                 x-transition:enter-end="opacity-100"
                 x-transition:leave="transition-opacity ease-in duration-200"
                 x-transition:leave-start="opacity-100"
                 x-transition:leave-end="opacity-0"
                 class="fixed inset-0 bg-black bg-opacity-50" 
                 @click="mobileFilterOpen = false"></div>
            
            <!-- Drawer content -->
            <div x-show="mobileFilterOpen"
                 x-transition:enter="transition ease-out duration-300"
                 x-transition:enter-start="translate-y-full"
                 x-transition:enter-end="translate-y-0"
                 x-transition:leave="transition ease-in duration-200"
                 x-transition:leave-start="translate-y-0"
                 x-transition:leave-end="translate-y-full"
                 class="fixed inset-x-0 bottom-0 bg-white rounded-t-2xl shadow-2xl max-h-[85vh] flex flex-col">
                
                <!-- Header -->
                <div class="flex justify-between items-center p-4 border-b border-gray-200">
                    <h2 class="text-lg font-bold text-gray-900">Filter</h2>
                    <button @click="mobileFilterOpen = false" 
                            class="p-2 hover:bg-gray-100 rounded-full transition-colors">
                        <i data-feather="x" class="w-5 h-5 text-gray-500"></i>
                    </button>
                </div>
                
                <!-- Scrollable content -->
                <div class="overflow-y-auto flex-1 p-4 space-y-5">
                    <!-- Search -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Cari Peralatan</label>
                        <div class="relative">
                            <input type="text" 
                                   x-model="searchQuery" 
                                   placeholder="Cari produk atau merek" 
                                   class="w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary">
                            <i data-feather="search" class="absolute left-3 top-3 text-gray-400 w-4 h-4"></i>
                        </div>
                    </div>
                    
                    <!-- Categories -->
                    <div>
                        <h3 class="font-medium text-gray-900 mb-3">Kategori</h3>
                        <div class="space-y-2">
                            <label class="flex items-center cursor-pointer hover:bg-gray-50 p-2.5 rounded-lg -mx-2">
                                <input type="checkbox" 
                                       value="fotografi" 
                                       x-model="selectedCategories" 
                                       class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded">
                                <span class="ml-3 text-sm text-gray-700">Fotografi & Videografi</span>
                            </label>
                            <label class="flex items-center cursor-pointer hover:bg-gray-50 p-2.5 rounded-lg -mx-2">
                                <input type="checkbox" 
                                       value="audio" 
                                       x-model="selectedCategories" 
                                       class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded">
                                <span class="ml-3 text-sm text-gray-700">Audio & Sound System</span>
                            </label>
                            <label class="flex items-center cursor-pointer hover:bg-gray-50 p-2.5 rounded-lg -mx-2">
                                <input type="checkbox" 
                                       value="lighting" 
                                       x-model="selectedCategories" 
                                       class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded">
                                <span class="ml-3 text-sm text-gray-700">Lighting & Stage</span>
                            </label>
                        </div>
                    </div>
                    
                    <!-- Price Range -->
                    <div>
                        <h3 class="font-medium text-gray-900 mb-3">Rentang Harga</h3>
                        <div class="space-y-3">
                            <div>
                                <label class="text-xs text-gray-600">Min: Rp<span x-text="priceRange[0].toLocaleString('id-ID')"></span></label>
                                <input type="range" 
                                       x-model.number="priceRange[0]" 
                                       min="50000" 
                                       max="5000000" 
                                       step="50000" 
                                       class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                            </div>
                            <div>
                                <label class="text-xs text-gray-600">Max: Rp<span x-text="priceRange[1].toLocaleString('id-ID')"></span></label>
                                <input type="range" 
                                       x-model.number="priceRange[1]" 
                                       min="50000" 
                                       max="5000000" 
                                       step="50000" 
                                       class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                            </div>
                        </div>
                    </div>
                    
                    <!-- Rental Duration -->
                    <div>
                        <h3 class="font-medium text-gray-900 mb-3">Durasi Rental</h3>
                        <div class="space-y-2">
                            <label class="flex items-center cursor-pointer hover:bg-gray-50 p-2.5 rounded-lg -mx-2">
                                <input type="radio" 
                                       value="daily" 
                                       x-model="rentalDuration" 
                                       class="h-4 w-4 text-primary focus:ring-primary border-gray-300">
                                <span class="ml-3 text-sm text-gray-700">Harian</span>
                            </label>
                            <label class="flex items-center cursor-pointer hover:bg-gray-50 p-2.5 rounded-lg -mx-2">
                                <input type="radio" 
                                       value="weekly" 
                                       x-model="rentalDuration" 
                                       class="h-4 w-4 text-primary focus:ring-primary border-gray-300">
                                <span class="ml-3 text-sm text-gray-700">Mingguan <span class="text-green-600">(Diskon 10%)</span></span>
                            </label>
                            <label class="flex items-center cursor-pointer hover:bg-gray-50 p-2.5 rounded-lg -mx-2">
                                <input type="radio" 
                                       value="monthly" 
                                       x-model="rentalDuration" 
                                       class="h-4 w-4 text-primary focus:ring-primary border-gray-300">
                                <span class="ml-3 text-sm text-gray-700">Bulanan <span class="text-green-600">(Diskon 25%)</span></span>
                            </label>
                        </div>
                    </div>
                    
                    <!-- Condition -->
                    <div>
                        <h3 class="font-medium text-gray-900 mb-3">Kondisi</h3>
                        <div class="space-y-2">
                            <label class="flex items-center cursor-pointer hover:bg-gray-50 p-2.5 rounded-lg -mx-2">
                                <input type="checkbox" 
                                       value="new" 
                                       x-model="condition" 
                                       class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded">
                                <span class="ml-3 text-sm text-gray-700">Baru (< 6 bulan)</span>
                            </label>
                            <label class="flex items-center cursor-pointer hover:bg-gray-50 p-2.5 rounded-lg -mx-2">
                                <input type="checkbox" 
                                       value="like-new" 
                                       x-model="condition" 
                                       class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded">
                                <span class="ml-3 text-sm text-gray-700">Seperti Baru</span>
                            </label>
                            <label class="flex items-center cursor-pointer hover:bg-gray-50 p-2.5 rounded-lg -mx-2">
                                <input type="checkbox" 
                                       value="good" 
                                       x-model="condition" 
                                       class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded">
                                <span class="ml-3 text-sm text-gray-700">Baik</span>
                            </label>
                        </div>
                    </div>
                    
                    <!-- Availability -->
                    <div>
                        <div class="flex items-center justify-between p-2.5 hover:bg-gray-50 rounded-lg -mx-2">
                            <h3 class="font-medium text-gray-900">Tersedia Sekarang</h3>
                            <button @click="availability = !availability" 
                                    :class="{'bg-primary': availability, 'bg-gray-300': !availability}" 
                                    class="relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2">
                                <span :class="{'translate-x-6': availability, 'translate-x-1': !availability}" 
                                      class="inline-block h-4 w-4 transform rounded-full bg-white transition-transform shadow-sm"></span>
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Footer -->
                <div class="bg-gray-50 p-4 flex gap-3 border-t border-gray-200">
                    <button @click="resetFilters()" 
                            class="flex-1 text-sm text-primary hover:text-blue-700 font-medium py-2.5 border border-primary rounded-lg hover:bg-blue-50 transition-colors">
                        Reset Filter
                    </button>
                    <button @click="mobileFilterOpen = false" 
                            class="flex-1 bg-primary text-white px-4 py-2.5 rounded-lg hover:bg-blue-700 transition-colors font-medium text-sm">
                        Terapkan Filter
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Mobile Sticky CTA -->
        <div class="lg:hidden fixed bottom-0 left-0 right-0 bg-white shadow-lg p-3 sm:p-4 border-t border-gray-200 z-30">
            <div class="flex justify-between items-center gap-3">
                <div class="flex-1 min-w-0">
                    <p class="text-xs text-gray-500 truncate">Butuh bantuan memilih?</p>
                    <p class="text-sm font-semibold text-gray-900 truncate">Tim ahli kami siap membantu</p>
                </div>
                <button class="bg-primary text-white px-4 sm:px-6 py-2.5 rounded-lg hover:bg-blue-700 transition-colors font-medium text-sm whitespace-nowrap flex items-center gap-2">
                    <i data-feather="message-circle" class="w-4 h-4"></i>
                    <span>Chat</span>
                </button>
            </div>
        </div>
    </div>
    
    <!-- Alpine JS -->
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    
    <!-- Initialize Alpine Component -->
    <script>
        function productCatalog() {
            return {
                // State
                mobileFilterOpen: false,
                viewType: 'grid',
                sortBy: 'popular',
                wishlist: [],
                currentPage: 1,
                itemsPerPage: 12,
                searchQuery: '',
                priceRange: [50000, 5000000],
                selectedCategories: [],
                rentalDuration: 'daily',
                condition: [],
                availability: true,
                products: [],
                
                // Initialize
                init() {
                    // Load saved preferences
                    if (localStorage.getItem('viewType')) {
                        this.viewType = localStorage.getItem('viewType');
                    }
                    if (localStorage.getItem('sortBy')) {
                        this.sortBy = localStorage.getItem('sortBy');
                    }
                    if (localStorage.getItem('wishlist')) {
                        this.wishlist = JSON.parse(localStorage.getItem('wishlist'));
                    }
                    
                    // Load products
                    this.products = this.getProducts();
                    
                    // Watch for changes
                    this.$watch('viewType', value => localStorage.setItem('viewType', value));
                    this.$watch('sortBy', value => localStorage.setItem('sortBy', value));
                    this.$watch('wishlist', value => localStorage.setItem('wishlist', JSON.stringify(value)));
                    
                    // Reset to page 1 when filters change
                    this.$watch('searchQuery', () => this.currentPage = 1);
                    this.$watch('priceRange', () => this.currentPage = 1);
                    this.$watch('selectedCategories', () => this.currentPage = 1);
                    this.$watch('condition', () => this.currentPage = 1);
                    this.$watch('rentalDuration', () => this.currentPage = 1);
                    this.$watch('availability', () => this.currentPage = 1);
                    
                    // Initialize Feather icons after a short delay
                    setTimeout(() => {
                        if (typeof feather !== 'undefined') {
                            feather.replace();
                        }
                    }, 100);
                    
                    // Re-initialize icons when view changes
                    this.$watch('viewType', () => {
                        setTimeout(() => {
                            if (typeof feather !== 'undefined') {
                                feather.replace();
                            }
                        }, 50);
                    });
                    
                    this.$watch('currentPage', () => {
                        setTimeout(() => {
                            if (typeof feather !== 'undefined') {
                                feather.replace();
                            }
                        }, 50);
                    });
                },
                
                // Product data
                getProducts() {
                    return [
                        {
                            id: 1,
                            name: 'Canon EOS R5 Mirrorless Camera',
                            brand: 'Canon',
                            category: 'fotografi',
                            price: 750000,
                            weeklyPrice: 675000,
                            monthlyPrice: 562500,
                            rating: 4.9,
                            reviews: 87,
                            condition: 'like-new',
                            availability: true,
                            stock: 3,
                            tags: ['popular'],
                            delivery: true,
                            specs: { resolution: '45MP', type: 'Mirrorless', year: 2022 },
                            image: 'https://images.unsplash.com/photo-1516035069371-29a1b244cc32?w=640&h=360&fit=crop'
                        },
                        {
                            id: 2,
                            name: 'Sony A7 III + Lensa 24-70mm',
                            brand: 'Sony',
                            category: 'fotografi',
                            price: 600000,
                            weeklyPrice: 540000,
                            monthlyPrice: 450000,
                            rating: 4.8,
                            reviews: 124,
                            condition: 'good',
                            availability: true,
                            stock: 2,
                            tags: [],
                            delivery: true,
                            specs: { resolution: '24MP', type: 'Mirrorless', year: 2018 },
                            image: 'https://images.unsplash.com/photo-1606980707123-64e4f752e563?w=640&h=360&fit=crop'
                        },
                        {
                            id: 3,
                            name: 'DJI Ronin RS3 Gimbal Stabilizer',
                            brand: 'DJI',
                            category: 'fotografi',
                            price: 350000,
                            weeklyPrice: 315000,
                            monthlyPrice: 262500,
                            rating: 4.7,
                            reviews: 45,
                            condition: 'new',
                            availability: true,
                            stock: 5,
                            tags: ['new'],
                            delivery: true,
                            specs: { weight: '1.5kg', battery: '12h', year: 2022 },
                            image: 'https://images.unsplash.com/photo-1492691527719-9d1e07e534b4?w=640&h=360&fit=crop'
                        },
                        {
                            id: 4,
                            name: 'Rode Wireless GO II Microphone',
                            brand: 'Rode',
                            category: 'audio',
                            price: 200000,
                            weeklyPrice: 180000,
                            monthlyPrice: 150000,
                            rating: 4.6,
                            reviews: 32,
                            condition: 'like-new',
                            availability: true,
                            stock: 4,
                            tags: [],
                            delivery: true,
                            specs: { range: '100m', channels: 2, year: 2021 },
                            image: 'https://images.unsplash.com/photo-1590602847861-f357a9332bbc?w=640&h=360&fit=crop'
                        },
                        {
                            id: 5,
                            name: 'Bose S1 Pro Portable PA System',
                            brand: 'Bose',
                            category: 'audio',
                            price: 450000,
                            weeklyPrice: 405000,
                            monthlyPrice: 337500,
                            rating: 4.5,
                            reviews: 28,
                            condition: 'good',
                            availability: true,
                            stock: 1,
                            tags: ['limited'],
                            delivery: true,
                            specs: { power: '250W', battery: '11h', year: 2020 },
                            image: 'https://images.unsplash.com/photo-1545127398-14699f92334b?w=640&h=360&fit=crop'
                        },
                        {
                            id: 6,
                            name: 'Godox SL-60W LED Video Light',
                            brand: 'Godox',
                            category: 'lighting',
                            price: 150000,
                            weeklyPrice: 135000,
                            monthlyPrice: 112500,
                            rating: 4.4,
                            reviews: 19,
                            condition: 'good',
                            availability: true,
                            stock: 6,
                            tags: [],
                            delivery: true,
                            specs: { power: '60W', cri: '95+', year: 2021 },
                            image: 'https://images.unsplash.com/photo-1573152143286-0c422b4d2175?w=640&h=360&fit=crop'
                        },
                        {
                            id: 7,
                            name: 'Manfrotto 190X Tripod',
                            brand: 'Manfrotto',
                            category: 'fotografi',
                            price: 120000,
                            weeklyPrice: 108000,
                            monthlyPrice: 90000,
                            rating: 4.3,
                            reviews: 41,
                            condition: 'good',
                            availability: true,
                            stock: 3,
                            tags: [],
                            delivery: true,
                            specs: { height: '150cm', weight: '2kg', year: 2020 },
                            image: 'https://images.unsplash.com/photo-1502920917128-1aa500764cbd?w=640&h=360&fit=crop'
                        },
                        {
                            id: 8,
                            name: 'Nanlite Forza 300B LED Light',
                            brand: 'Nanlite',
                            category: 'lighting',
                            price: 500000,
                            weeklyPrice: 450000,
                            monthlyPrice: 375000,
                            rating: 4.9,
                            reviews: 15,
                            condition: 'new',
                            availability: true,
                            stock: 2,
                            tags: ['new', 'popular'],
                            delivery: true,
                            specs: { power: '300W', cri: '96+', year: 2023 },
                            image: 'https://images.unsplash.com/photo-1589923188900-85dae523342b?w=640&h=360&fit=crop'
                        },
                        {
                            id: 9,
                            name: 'Sennheiser MKH 416 Shotgun Mic',
                            brand: 'Sennheiser',
                            category: 'audio',
                            price: 400000,
                            weeklyPrice: 360000,
                            monthlyPrice: 300000,
                            rating: 4.8,
                            reviews: 23,
                            condition: 'like-new',
                            availability: true,
                            stock: 2,
                            tags: [],
                            delivery: true,
                            specs: { pattern: 'Supercardioid', freq: '40Hz-20kHz', year: 2021 },
                            image: 'https://images.unsplash.com/photo-1598488035139-bdbb2231ce04?w=640&h=360&fit=crop'
                        },
                        {
                            id: 10,
                            name: 'DJI Mavic 3 Pro Drone',
                            brand: 'DJI',
                            category: 'fotografi',
                            price: 1200000,
                            weeklyPrice: 1080000,
                            monthlyPrice: 900000,
                            rating: 5.0,
                            reviews: 37,
                            condition: 'new',
                            availability: true,
                            stock: 1,
                            tags: ['new', 'popular', 'limited'],
                            delivery: true,
                            specs: { resolution: '20MP', flight: '46min', year: 2023 },
                            image: 'https://images.unsplash.com/photo-1473968512647-3e447244af8f?w=640&h=360&fit=crop'
                        },
                        {
                            id: 11,
                            name: 'Blackmagic Pocket Cinema 6K',
                            brand: 'Blackmagic',
                            category: 'fotografi',
                            price: 900000,
                            weeklyPrice: 810000,
                            monthlyPrice: 675000,
                            rating: 4.7,
                            reviews: 29,
                            condition: 'like-new',
                            availability: true,
                            stock: 2,
                            tags: [],
                            delivery: true,
                            specs: { resolution: '6K', dynamic: '13 stops', year: 2022 },
                            image: 'https://images.unsplash.com/photo-1502920514313-52581002a659?w=640&h=360&fit=crop'
                        },
                        {
                            id: 12,
                            name: 'Aputure 300D Mark II',
                            brand: 'Aputure',
                            category: 'lighting',
                            price: 550000,
                            weeklyPrice: 495000,
                            monthlyPrice: 412500,
                            rating: 4.8,
                            reviews: 31,
                            condition: 'like-new',
                            availability: true,
                            stock: 3,
                            tags: ['popular'],
                            delivery: true,
                            specs: { power: '300W', cri: '96+', year: 2021 },
                            image: 'https://images.unsplash.com/photo-1601758228041-f3b2795255f1?w=640&h=360&fit=crop'
                        }
                    ];
                },
                
                // Filtered products
                filteredProducts() {
                    return this.products.filter(product => {
                        const matchesSearch = !this.searchQuery || 
                            product.name.toLowerCase().includes(this.searchQuery.toLowerCase()) || 
                            product.brand.toLowerCase().includes(this.searchQuery.toLowerCase());
                        
                        const matchesPrice = product.price >= this.priceRange[0] && product.price <= this.priceRange[1];
                        
                        const matchesCategory = this.selectedCategories.length === 0 || 
                            this.selectedCategories.includes(product.category);
                        
                        const matchesCondition = this.condition.length === 0 || 
                            this.condition.includes(product.condition);
                        
                        const matchesAvailability = !this.availability || product.availability;
                        
                        return matchesSearch && matchesPrice && matchesCategory && 
                               matchesCondition && matchesAvailability;
                    });
                },
                
                // Sorted products
                sortedProducts() {
                    const filtered = this.filteredProducts();
                    return [...filtered].sort((a, b) => {
                        switch (this.sortBy) {
                            case 'popular':
                                return (b.rating * b.reviews) - (a.rating * a.reviews);
                            case 'price-low':
                                return a.price - b.price;
                            case 'price-high':
                                return b.price - a.price;
                            case 'rating':
                                return b.rating - a.rating;
                            case 'newest':
                                return b.specs.year - a.specs.year;
                            default:
                                return 0;
                        }
                    });
                },
                
                // Paginated products
                paginatedProducts() {
                    const sorted = this.sortedProducts();
                    const start = (this.currentPage - 1) * this.itemsPerPage;
                    const end = start + this.itemsPerPage;
                    return sorted.slice(start, end);
                },
                
                // Total pages
                totalPages() {
                    return Math.ceil(this.filteredProducts().length / this.itemsPerPage);
                },
                
                // Active filters
                activeFilters() {
                    const filters = [];
                    
                    if (this.searchQuery) {
                        filters.push(`"${this.searchQuery}"`);
                    }
                    
                    if (this.priceRange[0] > 50000 || this.priceRange[1] < 5000000) {
                        filters.push(`Rp${(this.priceRange[0]/1000).toFixed(0)}k-${(this.priceRange[1]/1000).toFixed(0)}k`);
                    }
                    
                    if (this.selectedCategories.length > 0) {
                        this.selectedCategories.forEach(cat => {
                            filters.push(cat.charAt(0).toUpperCase() + cat.slice(1));
                        });
                    }
                    
                    if (this.condition.length > 0) {
                        this.condition.forEach(cond => {
                            filters.push(this.getConditionLabel(cond));
                        });
                    }
                    
                    if (this.rentalDuration !== 'daily') {
                        filters.push(this.rentalDuration === 'weekly' ? 'Mingguan' : 'Bulanan');
                    }
                    
                    return filters;
                },
                
                // Helper functions
                formatPrice(product) {
                    let price, unit;
                    
                    switch (this.rentalDuration) {
                        case 'weekly':
                            price = product.weeklyPrice;
                            unit = '/minggu';
                            break;
                        case 'monthly':
                            price = product.monthlyPrice;
                            unit = '/bulan';
                            break;
                        default:
                            price = product.price;
                            unit = '/hari';
                    }
                    
                    return `Rp${price.toLocaleString('id-ID')}${unit}`;
                },
                
                getConditionLabel(condition) {
                    const labels = {
                        'new': 'Baru',
                        'like-new': 'Seperti Baru',
                        'good': 'Baik'
                    };
                    return labels[condition] || condition;
                },
                
                toggleWishlist(productId) {
                    const index = this.wishlist.indexOf(productId);
                    if (index > -1) {
                        this.wishlist.splice(index, 1);
                    } else {
                        this.wishlist.push(productId);
                    }
                },
                
                resetFilters() {
                    this.searchQuery = '';
                    this.priceRange = [50000, 5000000];
                    this.selectedCategories = [];
                    this.rentalDuration = 'daily';
                    this.condition = [];
                    this.availability = true;
                    this.currentPage = 1;
                }
            };
        }
    </script>
</body>
</html>